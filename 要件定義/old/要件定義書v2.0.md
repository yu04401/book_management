# 個人・グループ向け書庫管理システム 要件定義書

**文書バージョン:** v2.0  
**作成日:** 2025年6月3日  
**作成者:** システムアーキテクト  
**変更内容:** コミュニケーション機能削除、機能要件の再整理

---

## 1. 概要

### 1.1 システムの目的
個人の蔵書管理から友人グループでの書籍共有まで、親しい人たちとの読書体験を豊かにするWebサービスを提供する。読書習慣の可視化、効率的な書籍共有を通じて読書ライフの充実を支援する。

### 1.2 システムの概要
本システムは、個人ユーザーが自身の蔵書を管理し、親しい友人グループと書籍情報を共有できるWebアプリケーションである。ISBNスキャンによる書籍登録、読書状態管理、グループ内での本の貸し借り記録機能を提供し、プライベートな読書コミュニティ空間を創出する。

### 1.3 対象ユーザー
- **個人ユーザー**: 読書愛好家、学生、趣味の読書家
- **友人グループ**: 読書サークル、同じ趣味を持つ仲間
- **小規模コミュニティ**: 近所の読書会、オンライン読書友達

---

## 2. 機能要件

### 2.1 ユーザー認証・アカウント管理機能

#### 2.1.1 新規ユーザー登録機能
**機能ID**: AUTH-001  
**優先度**: 高  
**概要**: 新規ユーザーがアカウントを作成する機能

**詳細要件**:
- メールアドレスとパスワードによるアカウント作成
- ソーシャルログイン（Google、Apple）による簡単サインアップ
- メール認証による本人確認とアカウント有効化
- 利用規約・プライバシーポリシーへの同意確認
- プロフィール情報の初期設定（ニックネーム、アバター画像等）

**入力項目**:
- メールアドレス（必須、255文字以内）
- パスワード（必須、8-128文字、英数字記号組み合わせ）
- ニックネーム（必須、1-50文字）
- アバター画像（任意、JPEG/PNG/WebP、最大5MB）

**業務ルール**:
- パスワードは英大文字、英小文字、数字、記号のうち3種類以上を含む
- 同一メールアドレスでの重複登録は不可
- メール認証完了まで一部機能制限

#### 2.1.2 ログイン・ログアウト機能
**機能ID**: AUTH-002  
**優先度**: 高  
**概要**: 既存ユーザーの認証機能

**詳細要件**:
- メールアドレス・パスワードによるログイン
- ソーシャルログインによるログイン
- ログイン状態保持機能（Remember me）
- 安全なログアウト機能
- セッション管理

**業務ルール**:
- 連続ログイン失敗5回でアカウント一時ロック（15分間）
- セッション有効期限：30分（無操作時）
- Remember me有効期限：30日間
- 同時ログイン上限：5台

#### 2.1.3 パスワード管理機能
**機能ID**: AUTH-003  
**優先度**: 中  
**概要**: パスワードリセット・変更機能

**詳細要件**:
- パスワードリセット要求（メール送信）
- リセットリンクによるパスワード再設定
- ログイン後のパスワード変更
- パスワード変更時の既存セッション無効化

**業務ルール**:
- リセットリンク有効期限：1時間
- パスワード変更時は全デバイスで再ログイン要求

#### 2.1.4 プロフィール管理機能
**機能ID**: AUTH-004  
**優先度**: 中  
**概要**: ユーザープロフィール情報の管理機能

**詳細要件**:
- プロフィール情報の表示・編集
- アバター画像のアップロード・変更
- 読書嗜好・興味分野の設定
- アカウント削除機能

**入力項目**:
- ニックネーム（1-50文字）
- 自己紹介（任意、500文字以内）
- 年齢層（選択式）
- 興味分野（複数選択可）

### 2.2 個人蔵書管理機能

#### 2.2.1 書籍登録機能
**機能ID**: BOOK-001  
**優先度**: 高  
**概要**: 個人蔵書への書籍追加機能

**詳細要件**:
- ISBNスキャン（カメラ機能）による書籍登録
- 手動ISBN入力による書籍登録
- 外部API（Google Books、楽天ブックス）からの書籍情報自動取得
- 手動入力による書籍情報登録
- 媒体種別の選択（実本/電子書籍/両方）
- 電子書籍アプリの選択（Kindle、楽天Kobo、Apple Books等）

**入力項目**:
- ISBN（任意、13桁）
- 書籍タイトル（必須、200文字以内）
- 著者名（必須、100文字以内）
- 出版社（任意、100文字以内）
- 出版日（任意）
- 媒体種別（必須、実本/電子書籍/両方）
- 電子書籍アプリ（電子書籍の場合必須）
- 購入日（任意）
- 購入価格（任意）

**業務ルール**:
- 個人蔵書上限：5,000冊
- 同一ISBN・媒体の重複登録は警告表示
- 外部API取得失敗時は手動入力モードに切り替え

#### 2.2.2 読書記録管理機能
**機能ID**: BOOK-002  
**優先度**: 高  
**概要**: 読書状態・進捗の記録管理機能

**詳細要件**:
- 読書状態の設定・変更（積読/読書中/読了/お気に入り）
- 読書開始日・完了日の記録
- 個人評価（5段階評価）
- 個人メモ・感想の記録
- 読書進捗の記録（ページ数/パーセント）

**入力項目**:
- 読書状態（必須、選択式）
- 読書開始日（任意）
- 読書完了日（任意）
- 評価（任意、1-5段階）
- メモ・感想（任意、1000文字以内）
- 現在ページ/総ページ数（任意）

**業務ルール**:
- 読書状態変更時は自動的に日付記録
- 完了日は開始日以降の日付のみ有効
- 進捗は0-100%の範囲で管理

#### 2.2.3 保管場所管理機能
**機能ID**: BOOK-003  
**優先度**: 中  
**概要**: 実本の保管場所記録機能

**詳細要件**:
- 保管場所の文字情報入力
- 保管場所写真の撮影・アップロード
- 保管場所の検索・フィルタ機能
- 保管場所別書籍一覧表示

**入力項目**:
- 保管場所名（任意、50文字以内）
- 保管場所詳細（任意、200文字以内）
- 保管場所写真（任意、JPEG/PNG/WebP、最大10MB）

**業務ルール**:
- 実本のみ保管場所設定可能
- 保管場所写真は1冊につき最大3枚

#### 2.2.4 蔵書検索・フィルタ機能
**機能ID**: BOOK-004  
**優先度**: 中  
**概要**: 個人蔵書の検索・絞り込み機能

**詳細要件**:
- キーワード検索（タイトル、著者、ISBN）
- 読書状態別フィルタ
- 媒体種別フィルタ
- 評価別フィルタ
- 登録日・読了日範囲指定
- 保管場所別フィルタ

**業務ルール**:
- 検索結果は登録日降順でデフォルト表示
- フィルタ条件は複数選択可能
- 検索履歴は最新10件まで保存

### 2.3 グループ管理機能

#### 2.3.1 グループ作成機能
**機能ID**: GROUP-001  
**優先度**: 高  
**概要**: 友人グループの作成機能

**詳細要件**:
- グループ名・説明の設定
- グループアイコンの設定
- 初期メンバーとしてグループ作成者を自動追加
- グループ作成者の管理者権限付与

**入力項目**:
- グループ名（必須、50文字以内）
- グループ説明（任意、200文字以内）
- グループアイコン（任意、JPEG/PNG/WebP、最大5MB）

**業務ルール**:
- 1ユーザーあたりのグループ作成上限：10個
- グループ名は作成者内で重複不可

#### 2.3.2 メンバー招待・管理機能
**機能ID**: GROUP-002  
**優先度**: 高  
**概要**: グループメンバーの招待・管理機能

**詳細要件**:
- メールアドレスによるメンバー招待
- 招待リンクの生成・共有
- 招待承認・辞退機能
- メンバー一覧表示
- メンバー権限管理（管理者/一般メンバー）
- メンバー除名機能（管理者のみ）

**入力項目**:
- 招待メールアドレス（必須）
- 招待メッセージ（任意、200文字以内）

**業務ルール**:
- グループメンバー上限：20名
- 招待リンク有効期限：7日間
- 管理者は最低1名必須
- グループ作成者の退出時は管理者権限移譲必須

#### 2.3.3 グループ設定管理機能
**機能ID**: GROUP-003  
**優先度**: 中  
**概要**: グループ設定の変更・管理機能

**詳細要件**:
- グループ情報の編集（管理者のみ）
- グループ削除機能（管理者のみ）
- メンバー参加承認制の設定
- グループからの退出機能

**業務ルール**:
- グループ削除時は全メンバーに通知
- 最後のメンバー退出時にグループ自動削除

### 2.4 共有書庫機能

#### 2.4.1 グループ蔵書表示機能
**機能ID**: SHARE-001  
**優先度**: 高  
**概要**: グループメンバーの蔵書一覧表示機能

**詳細要件**:
- グループメンバー全員の蔵書統合表示
- 所有者情報の表示
- 媒体種別の表示
- 貸出状況の表示
- 書籍詳細情報の表示

**表示項目**:
- 書籍情報（タイトル、著者、表紙画像）
- 所有者名
- 媒体種別（実本/電子書籍/両方）
- 貸出状況（利用可能/貸出中）
- 所有者評価・コメント

**業務ルール**:
- 自分の蔵書は編集可能な表示
- 他人の蔵書は閲覧のみ
- プライベート設定の書籍は非表示

#### 2.4.2 共有設定機能
**機能ID**: SHARE-002  
**優先度**: 中  
**概要**: 個人蔵書の共有設定機能

**詳細要件**:
- 書籍ごとの共有ON/OFF設定
- グループごとの共有設定
- 一括共有設定変更
- 共有除外書籍の設定

**業務ルール**:
- デフォルトは共有OFF
- 共有停止時は貸出中書籍の返却後に適用
- プライベート書籍は検索結果に表示されない

### 2.5 貸し借り管理機能

#### 2.5.1 貸出申請機能
**機能ID**: LOAN-001  
**優先度**: 高  
**概要**: 書籍の貸出申請機能

**詳細要件**:
- 借りたい書籍の貸出申請
- 借用期間の設定
- 申請メッセージの入力
- 申請状況の確認

**入力項目**:
- 借用期間（必須、1-90日）
- 申請メッセージ（任意、200文字以内）

**業務ルール**:
- 実本のみ貸出申請可能
- 既に貸出中の書籍は申請不可
- 1ユーザーあたりの同時申請上限：10件

#### 2.5.2 貸出承認・管理機能
**機能ID**: LOAN-002  
**優先度**: 高  
**概要**: 貸出申請の承認・管理機能

**詳細要件**:
- 貸出申請の承認・拒否
- 貸出中書籍の一覧表示
- 返却予定日の管理
- 返却催促機能

**業務ルール**:
- 申請から7日以内に承認・拒否必須
- 返却予定日超過時に自動催促通知
- 貸出期間は最大90日

#### 2.5.3 返却管理機能
**機能ID**: LOAN-003  
**優先度**: 高  
**概要**: 書籍返却の記録・管理機能

**詳細要件**:
- 返却完了の記録
- 返却日の自動記録
- 貸出履歴の表示
- 返却遅延の管理

**業務ルール**:
- 借用者・貸出者両方が返却完了を確認
- 返却完了後は貸出状態を自動解除
- 返却遅延は3日超過で記録

### 2.6 読書チャレンジ機能

#### 2.6.1 個人目標設定機能
**機能ID**: CHALLENGE-001  
**優先度**: 中  
**概要**: 個人の読書目標設定・管理機能

**詳細要件**:
- 読書目標の設定（月次/年次）
- 目標期間の設定
- 進捗の自動計算・表示
- 目標達成時の記録

**入力項目**:
- 目標冊数（必須、1-999冊）
- 目標期間（必須、月次/年次）
- 開始日（必須）
- 目標説明（任意、100文字以内）

**業務ルール**:
- 同時設定可能な目標：3個まで
- 進捗は読了日ベースで計算
- 目標達成時は自動記録・通知

#### 2.6.2 グループチャレンジ機能
**機能ID**: CHALLENGE-002  
**優先度**: 低  
**概要**: グループでの読書チャレンジ機能

**詳細要件**:
- グループ共通目標の設定
- メンバー参加・離脱機能
- グループ進捗の表示
- チャレンジ完了の記録

**業務ルール**:
- グループチャレンジは管理者のみ作成可能
- 参加は任意、途中離脱可能
- グループ目標はメンバー全員の合計で計算

### 2.7 通知機能

#### 2.7.1 システム通知機能
**機能ID**: NOTIF-001  
**優先度**: 中  
**概要**: システム内通知機能

**詳細要件**:
- アプリ内通知の表示
- 通知一覧の管理
- 通知の既読・未読管理
- 通知の削除機能

**通知種類**:
- グループ招待通知
- 貸出申請通知
- 貸出承認・拒否通知
- 返却期限通知
- 目標達成通知

#### 2.7.2 メール通知機能
**機能ID**: NOTIF-002  
**優先度**: 中  
**概要**: メール通知機能

**詳細要件**:
- 重要通知のメール送信
- メール通知設定の管理
- 通知頻度の設定
- 通知停止機能

**業務ルール**:
- メール通知はデフォルトON
- 通知頻度は即時/日次/週次から選択
- 一括通知停止機能あり

---

## 3. 非機能要件

### 3.1 性能要件
- **応答時間**: 3秒以内（書籍検索、ページ遷移）
- **同時接続数**: 1,000ユーザー
- **スループット**: 100リクエスト/秒
- **データベース**: 100万書籍、10万ユーザーに対応

### 3.2 可用性要件
- **稼働率**: 99.9%（月間ダウンタイム43分以内）
- **障害復旧時間**: 1時間以内
- **メンテナンス時間**: 月1回、2時間以内

### 3.3 セキュリティ要件
- **通信暗号化**: HTTPS通信の強制
- **認証**: JWT認証トークンの実装
- **パスワード**: bcryptによるハッシュ化
- **二要素認証**: SMS/メールによる2FA対応
- **アクセス制御**: 5回連続失敗で15分ロック
- **脆弱性対策**: XSS、CSRF、SQLインジェクション対策

### 3.4 ユーザビリティ要件
- **対応ブラウザ**: Chrome, Firefox, Safari, Edge（最新版）
- **対応デバイス**: PC、スマートフォン、タブレット
- **レスポンシブ対応**: 画面サイズに応じた最適表示
- **PWA対応**: オフライン機能、ホーム画面追加

### 3.5 互換性要件
- **OS対応**: iOS 14+, Android 10+, Windows 10+, macOS 10.15+
- **外部API**: Google Books API, 楽天ブックス API
- **データ形式**: JSON, CSV, PDF

### 3.6 保守性要件
- **ログ記録**: アクセスログ、エラーログ、セキュリティログ
- **監視**: サーバー死活監視、パフォーマンス監視
- **バックアップ**: 日次データベースバックアップ
- **データ保持**: 削除後30日間のデータ復旧可能

---

## 4. 制約条件

### 4.1 技術制約
- **フロントエンド**: React.js/Next.js
- **バックエンド**: Python/FastAPI
- **データベース**: PostgreSQL 13+
- **キャッシュ**: Redis 6.0+
- **クラウド**: AWS環境

### 4.2 利用制約
- **個人蔵書上限**: 5,000冊
- **グループ参加上限**: 20名
- **ファイルサイズ制限**: 画像10MB/ファイル
- **ストレージ制限**: 1GB/ユーザー（無料プラン）

### 4.3 法的制約
- **個人情報保護法**: GDPR、個人情報保護法準拠
- **利用規約**: サービス利用規約の同意必須
- **著作権**: 書籍情報の適切な利用

---

## 5. 受け入れ基準

### 5.1 機能要件の受け入れ基準
各機能について以下を満たすこと:
- 要件定義書に記載された全機能が実装されている
- 業務ルールが適切に実装されている
- エラーハンドリングが適切に行われている
- ユーザビリティ要件を満たしている

### 5.2 性能要件の受け入れ基準
- 負荷テストにより性能要件を満たすことを確認
- 大量データでの動作確認
- 同時接続テストの実施

### 5.3 セキュリティ要件の受け入れ基準
- ペネトレーションテストの実施
- 脆弱性診断の実施
- セキュリティ要件の全項目クリア

---

## 6. リスク管理

### 6.1 技術リスク
- **外部API障害**: Google Books APIの利用制限・障害
- **スケーラビリティ**: ユーザー数増加による性能劣化
- **データ整合性**: 同時アクセスによるデータ競合

### 6.2 運用リスク
- **データ損失**: バックアップ・復旧手順の確立
- **セキュリティ**: 不正アクセス・データ漏洩対策
- **可用性**: システム障害時の迅速な復旧

### 6.3 ビジネスリスク
- **法的リスク**: 個人情報保護法への対応
- **競合リスク**: 類似サービスとの差別化
- **ユーザー離脱**: 機能不足・使いにくさによる離脱

---

**文書管理**  
**作成日**: 2025年6月3日  
**最終更新**: 2025年6月3日  
**承認者**: プロダクトオーナー  
**次回レビュー**: 2025年7月3日